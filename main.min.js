var a='video';var b='a#addAnnotation';var c=0;var d=[];function e(a,b,c,d,e,f,g,h){this.text=a;this.imageUrl=b;this.xPosition=c;this.yPosition=d;this.width=e;this.height=f;this.startTime=g;this.endTime=h;}function f(){var a=new e('Annotation',null,30,30,30,30,3,5);d.push(a);console.log(d);}function g(){console.log('update called.');var a=$.grep(d,function(a){return(c>=a.startTime&&c<a.endTime);});var b=$.grep(d,function(a){return(c==a.startTime);});var e=$.grep(d,function(a){return(c==a.endTime);});console.log(a);}function h(){var b=$(a).data('easyannotation-file-id');if(localStorage.getItem(b)){var c=JSON.parse(localStorage.getItem(b));if(c==null)d=[];else d=c;}else d=[];}function i(){var b=JSON.stringify(d);var c=$(a).data('easyannotation-file-id');localStorage.setItem(c,b);}function j(){window.localStorage.clear();d=[];console.log('Local storage cleared.');}function k(){console.log('Starting to add annotation...');$(a).trigger('pause');}$(document).ready(function(){console.log('ready');h();$(a).bind("play",function(){console.log('started playing.');g();});$(a).bind('pause',function(){console.log('playback paused.');});$(a).bind('ended',function(){console.log('finished playing.');c=0;});$(a).bind('timeupdate',function(){newTime=Math.floor(this.currentTime);if(newTime!=c){console.log('seconds changed: '+newTime);c=newTime;g();}});$(b).click(function(){k();});});