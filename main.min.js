var a='video';var b=0;var c=[];function d(a,b,c,d,e,f,g,h){this.text=a;this.imageUrl=b;this.xPosition=c;this.yPosition=d;this.width=e;this.height=f;this.startTime=g;this.endTime=h;}function e(){var a=new d('Annotation',null,30,30,30,30,3,5);c.push(a);console.log(c);}function f(){console.log('update called.');var a=$.grep(c,function(a){return(b>=a.startTime&&b<a.endTime);});var d=$.grep(c,function(a){return(b==a.startTime);});var e=$.grep(c,function(a){return(b==a.endTime);});console.log(a);}function g(){var b=$(a).data('easyannotation-file-id');if(localStorage.getItem(b)){var d=JSON.parse(localStorage.getItem(b));if(d==null)c=[];else c=d;}else c=[];}function h(){var b=JSON.stringify(c);var d=$(a).data('easyannotation-file-id');localStorage.setItem(d,b);}function i(){window.localStorage.clear();c=[];console.log('Local storage cleared.');}$(document).ready(function(){console.log('ready');g();$(a).bind("play",function(){console.log('started playing.');f();});$(a).bind('pause',function(){console.log('playback paused.');});$(a).bind('ended',function(){console.log('finished playing.');b=0;});$(a).bind('timeupdate',function(){newTime=Math.floor(this.currentTime);if(newTime!=b){console.log('seconds changed: '+newTime);b=newTime;f();}});});